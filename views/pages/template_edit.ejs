<%- contentFor('leftSidebar') %>
<%- include('../navbars/sidebar1') %>

<%- contentFor('content') %>
<!-- Split View Container -->
<div class="flex flex-1 overflow-hidden">
    <!-- Code Editor Section -->
    <div class="w-1/2 h-screen p-4 border-r">
        <div class="card bg-base-100 shadow-xl h-full">
            <div class="card-body p-0">
                <textarea id="codeEditor"></textarea>
            </div>
        </div>
    </div>

    <!-- PDF Preview Section -->
    <div class="w-1/2 h-screen p-4">
        <div class="card bg-base-100 shadow-xl h-full">
            <div class="card-body">
                <h2 class="card-title">PDF Preview</h2>
                <div class="flex-1 bg-base-200 rounded-lg overflow-hidden">
                    <iframe id="pdfPreview" class="w-full h-full"></iframe>
                </div>
            </div>
        </div>
    </div>
</div>

<%- contentFor('scripts') %>
<script>
    // Initialize CodeMirror
    var editor = CodeMirror.fromTextArea(document.getElementById("codeEditor"), {
        mode: "xml",
        theme: "monokai",
        lineNumbers: true,
        autoCloseTags: true,
        autoCloseBrackets: true,
        lineWrapping: true
    });

    // Example function to update PDF preview
    function updatePDFPreview() {
        const code = editor.getValue();
        // Here you would typically send the code to your backend to generate/update the PDF
        document.getElementById('pdfPreview').src = '/view-pdf/preview';
    }

    // Update preview when code changes (with debounce)
    let timeout;
    editor.on('change', function() {
        clearTimeout(timeout);
        timeout = setTimeout(updatePDFPreview, 1000);
    });
</script>